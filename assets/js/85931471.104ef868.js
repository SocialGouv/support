"use strict";(self.webpackChunksupport=self.webpackChunksupport||[]).push([[2465],{1343:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var a=t(7462),r=(t(7294),t(3905));t(8209);const l={},i="D\xe9ployer en production from scratch",o={unversionedId:"workshops/production",id:"workshops/production",title:"D\xe9ployer en production from scratch",description:"TL;DR",source:"@site/docs/workshops/production.md",sourceDirName:"workshops",slug:"/workshops/production",permalink:"/support/docs/workshops/production",draft:!1,editUrl:"https://github.com/socialgouv/support/tree/master/docs/workshops/production.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"FAQ",permalink:"/support/docs/faq"},next:{title:"Kubernetes from scratch",permalink:"/support/docs/workshops/kubernetes"}},s={},u=[{value:"TL;DR",id:"tldr",level:2},{value:"Intro",id:"intro",level:2},{value:"Point de d\xe9part et pr\xe9requis",id:"point-de-d\xe9part-et-pr\xe9requis",level:3},{value:"Ajouter une pipeline de test",id:"ajouter-une-pipeline-de-test",level:3},{value:"D\xe9ployer une review branch",id:"d\xe9ployer-une-review-branch",level:2},{value:"Build docker et v\xe9rifications en local",id:"build-docker-et-v\xe9rifications-en-local",level:3},{value:"Build et enregistrement de l&#39;image docker au push",id:"build-et-enregistrement-de-limage-docker-au-push",level:3},{value:"D\xe9ploiement de la preview",id:"d\xe9ploiement-de-la-preview",level:3},{value:"Bonnes pratiques",id:"bonnes-pratiques",level:2},{value:"Nettoyer les environnements de review",id:"nettoyer-les-environnements-de-review",level:3},{value:"D\xe9tection des vuln\xe9rabilit\xe9s",id:"d\xe9tection-des-vuln\xe9rabilit\xe9s",level:3},{value:"Mettre \xe0 jour les d\xe9pendances",id:"mettre-\xe0-jour-les-d\xe9pendances",level:3},{value:"D\xe9ployer en preprod",id:"d\xe9ployer-en-preprod",level:2},{value:"Faire une release",id:"faire-une-release",level:2},{value:"D\xe9ployer en production",id:"d\xe9ployer-en-production",level:2},{value:"Prochains sujets - soon",id:"prochains-sujets---soon",level:2}],p={toc:u},d="wrapper";function c(e){let{components:n,...l}=e;return(0,r.kt)(d,(0,a.Z)({},p,l,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"d\xe9ployer-en-production-from-scratch"},"D\xe9ployer en production from scratch"),(0,r.kt)("h2",{id:"tldr"},"TL;DR"),(0,r.kt)("p",null,"Pour avoir une app d\xe9ploy\xe9e en production en 2 minutes sans lire la doc, c'est par ici :"),(0,r.kt)("p",null,"\u27a1","\ufe0f"," ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/SocialGouv/template"},"template d'application SocialGouv")),(0,r.kt)("h2",{id:"intro"},"Intro"),(0,r.kt)("h3",{id:"point-de-d\xe9part-et-pr\xe9requis"},"Point de d\xe9part et pr\xe9requis"),(0,r.kt)("p",null,"Plusieurs possibilit\xe9s :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"soit partir d'un ",(0,r.kt)("strong",{parentName:"li"},"code existant")),(0,r.kt)("li",{parentName:"ul"},"soit g\xe9n\xe9rer une application from scratch, par exemple en suivant le ",(0,r.kt)("a",{parentName:"li",href:"https://nextjs.org/docs/getting-started"},"tutorial Next.js"))),(0,r.kt)("p",null,"Dans tous les cas, il faut :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"cr\xe9er un d\xe9p\xf4t github de ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/socialgouv"},"l'organisation SocialGouv")," et y publier le code."),(0,r.kt)("li",{parentName:"ul"},"ajouter une route de health check (vue simple qui renvoie un HTTP 200) sur la route ",(0,r.kt)("inlineCode",{parentName:"li"},"/healthz"),".\nPar exemple avec Next.js, cr\xe9er un fichier ",(0,r.kt)("inlineCode",{parentName:"li"},"pages/healthz.js")," qui contient :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const Page = () => <div>It Works!</div>;\nexport default Page;\n")),(0,r.kt)("h3",{id:"ajouter-une-pipeline-de-test"},"Ajouter une pipeline de test"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"pr\xe9requis : avoir une commande qui lance un test. Avec une nouvelle app Next.js : ",(0,r.kt)("inlineCode",{parentName:"li"},"yarn lint"),"."),(0,r.kt)("li",{parentName:"ul"},"cr\xe9er un workflow github de test en ajoutant un fichier ",(0,r.kt)("inlineCode",{parentName:"li"},".github/workflows/test.yaml")," avec par exemple :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'name: Tests\n\non:\n  push:\n    branches:\n      - "**"\n    tags-ignore:\n      - v*\n\nconcurrency:\n  cancel-in-progress: true\n  group: tests-${{ github.ref }}\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    steps:\n      - name: Checkout repository\n        uses: actions/checkout@v3\n\n      - name: Node setup\n        uses: actions/setup-node@v2\n        with:\n          node-version: "16"\n\n      - name: Yarn cache setup\n        uses: c-hive/gha-yarn-cache@v2\n\n      - name: Install dependencies\n        run: yarn --frozen-lockfile --prefer-offline\n\n      - name: Run linter\n        run: yarn lint\n')),(0,r.kt)("h2",{id:"d\xe9ployer-une-review-branch"},"D\xe9ployer une review branch"),(0,r.kt)("p",null,"Le d\xe9ploiement d'une review branch se fait en deux \xe9tapes :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"vous devez d'abord publier les images docker de vos applications sur le registry GitHub"),(0,r.kt)("li",{parentName:"ul"},"puis d\xe9ployer votre application \xe0 partir de ces images.")),(0,r.kt)("h3",{id:"build-docker-et-v\xe9rifications-en-local"},"Build docker et v\xe9rifications en local"),(0,r.kt)("p",null,"WARNING: Cette section est actuellement r\xe9dig\xe9e uniquement pour une app Next.js. Pour un autre cas, il faut au minimum\nun fichier Dockerfile qui build un service web \xe9coutant sur le port 3000."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"copier les fichiers ",(0,r.kt)("a",{target:"_blank",href:t(6701).Z},"Dockerfile")," et\n",(0,r.kt)("a",{target:"_blank",href:t(9167).Z},".dockerignore")," dans votre projet"),(0,r.kt)("li",{parentName:"ul"},"ajouter l'option suivante dans le fichier ",(0,r.kt)("inlineCode",{parentName:"li"},"next.config.js")," :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"experimental: {\n  outputStandalone: true;\n}\n")),(0,r.kt)("p",null,"Exemple de fichier ",(0,r.kt)("a",{target:"_blank",href:t(4014).Z},"next.config.js")," complet."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Build de l'image en local :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker build -t nextjs-docker .\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Ex\xe9cuter en local et v\xe9rifier sur http://localhost:3000 :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker run -p 3000:3000 nextjs-docker\n")),(0,r.kt)("p",null,"?> ",(0,r.kt)("strong",{parentName:"p"},"Note pour une application existante :")," les containers doivent tourner sur des users non-privil\xe9gi\xe9s (UID > 0), et pour que ce soit v\xe9rifiable il faut identifier\nun utilisateur par son UID chiffr\xe9 dans la directive docker du ",(0,r.kt)("inlineCode",{parentName:"p"},"Dockerfile")," (ex ",(0,r.kt)("inlineCode",{parentName:"p"},"USER 101"),")."),(0,r.kt)("h3",{id:"build-et-enregistrement-de-limage-docker-au-push"},"Build et enregistrement de l'image docker au push"),(0,r.kt)("p",null,"Dans un nouveau workflow github ",(0,r.kt)("inlineCode",{parentName:"p"},"review.yaml")," (i.e. dans un fichier ",(0,r.kt)("inlineCode",{parentName:"p"},".github/workflows/review.yaml"),"), ajouter un job qui utilise l'action toute pr\xeate ",(0,r.kt)("inlineCode",{parentName:"p"},"SocialGouv/actions/autodevops-build-register"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"register-app:\n  name: Build & Register app\n  runs-on: ubuntu-latest\n  steps:\n    - name: Use autodevops build and register\n      uses: SocialGouv/actions/autodevops-build-register@v1\n      with:\n        environment: dev\n        imagePackage: app\n        token: ${{ secrets.GITHUB_TOKEN }}\n")),(0,r.kt)("p",null,"Ce job build l'image avec le Dockerfile par d\xe9faut \xe0 la racine et sauve l'image dans le registre github associ\xe9 au d\xe9p\xf4t."),(0,r.kt)("p",null,"?> A ce stade, le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"review.yaml")," complet est : ",(0,r.kt)("a",{target:"_blank",href:t(6791).Z},"review.yaml"),"."),(0,r.kt)("p",null,"!> Pour v\xe9rifier que l'image docker est build\xe9e et accessible, aller dans l'onglet \"Packages\" de Github et lancer en local un ",(0,r.kt)("inlineCode",{parentName:"p"},"docker pull ...")," du package tel qu'indiqu\xe9 par github."),(0,r.kt)("h3",{id:"d\xe9ploiement-de-la-preview"},"D\xe9ploiement de la preview"),(0,r.kt)("p",null,"Afin de d\xe9ployer la review branch dans l'environnement de dev de SocialGouv, il faut ajouter deux choses :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"un deuxi\xe8me job dans le fichier existant ",(0,r.kt)("inlineCode",{parentName:"li"},"review.yaml")," qui va utiliser l'action de d\xe9ploiement ",(0,r.kt)("inlineCode",{parentName:"li"},"SocialGouv/kube-workflow")),(0,r.kt)("li",{parentName:"ul"},"un dossier ",(0,r.kt)("inlineCode",{parentName:"li"},".kube-workflow")," \xe0 la racine du d\xe9p\xf4t")),(0,r.kt)("p",null,"Le ",(0,r.kt)("strong",{parentName:"p"},"job de d\xe9ploiement")," \xe0 ajouter dans le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},".github/workflows/review.yaml")," est :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"deploy:\n  name: Deploy review branch\n  runs-on: ubuntu-latest\n  needs: [register-app]\n  steps:\n    - name: Use kube-workflow deployment\n      uses: SocialGouv/kube-workflow@v1\n      with:\n        environment: dev\n        token: ${{ secrets.GITHUB_TOKEN }}\n        kubeconfig: ${{ secrets.KUBECONFIG }}\n        rancherProjectId: ${{ secrets.RANCHER_PROJECT_ID }}\n        rancherProjectName: ${{ secrets.RANCHER_PROJECT_NAME }}\n")),(0,r.kt)("p",null,"?> A ce stade, le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"review.yaml")," complet est : ",(0,r.kt)("a",{target:"_blank",href:t(9514).Z},"review.yaml"),"."),(0,r.kt)("p",null,"Ensuite il faut cr\xe9er ",(0,r.kt)("strong",{parentName:"p"},"un dossier ",(0,r.kt)("inlineCode",{parentName:"strong"},".kube-workflow")),", qui contiendra la configuration de votre d\xe9ploiement (format HELM), avec l'arborescence g\xe9n\xe9rale suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},".kube-workflow/\n    common/\n      values.yaml\n    env/\n      dev/\n        templates/\n          ...\n        values.yaml\n      preprod/\n        ...\n      prod/\n        ...\n")),(0,r.kt)("p",null,"Pour l'instant, nous nous int\xe9ressons seulement au fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"common/values.yaml"),"."),(0,r.kt)("p",null,"Le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"common/values.yaml")," minimaliste d\xe9clare notre composant unique (",(0,r.kt)("inlineCode",{parentName:"p"},"app"),"), le nom du\npackage et la route de health check. Il contient :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"app:\n  enabled: true\n  imagePackage: app\n  probesPath: /api/healthz\n  replicas: 1\n")),(0,r.kt)("p",null,"!> Pour que le d\xe9ploiement fonctionne, il faut avoir r\xe9gl\xe9 plusieurs variables d'environnement dans le d\xe9p\xf4t (",(0,r.kt)("inlineCode",{parentName:"p"},"KUBECONFIG"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"RANCHER_PROJECT_ID")," et ",(0,r.kt)("inlineCode",{parentName:"p"},"RANCHER_PROJECT_NAME"),"). Cette \xe9tape est effectu\xe9e par l'\xe9quipe SRE."),(0,r.kt)("p",null,"?> Plus de d\xe9tail sur la configuration sur-mesure de ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/SocialGouv/kube-workflow"},"kube-workflow"),"."),(0,r.kt)("h2",{id:"bonnes-pratiques"},"Bonnes pratiques"),(0,r.kt)("h3",{id:"nettoyer-les-environnements-de-review"},"Nettoyer les environnements de review"),(0,r.kt)("p",null,"A chaque fois qu'une PR est ferm\xe9e, c'est une bonne habitude de supprimer toutes les ressources qui ont \xe9t\xe9 cr\xe9\xe9es pour d\xe9ployer la review branch."),(0,r.kt)("p",null,"Pour \xe7a, il faut ajouter un nouveau workflow ",(0,r.kt)("inlineCode",{parentName:"p"},".github/workflows/deactivate.yaml")," qui se charge de tout nettoyer."),(0,r.kt)("p",null,"Exemple de fichier complet : ",(0,r.kt)("a",{target:"_blank",href:t(3291).Z},"deactivate.yaml")),(0,r.kt)("p",null,"?> Dans tous les cas, un ",(0,r.kt)("a",{parentName:"p",href:"https://codeberg.org/hjacobs/kube-janitor"},"janitor")," s'occupe de supprimer tous les ressources de review qui n'ont pas eu d'activit\xe9 ",(0,r.kt)("a",{parentName:"p",href:"https://socialgouv.github.io/support/#/faq?id=nettoyage-des-environnements-kube-de-dev"},"depuis 1 semaine"),". Il\nne faut donc pas s'\xe9tonner que le d\xe9ploiement d'une review branch ait disparu \xe0 son retour de vacances..."),(0,r.kt)("h3",{id:"d\xe9tection-des-vuln\xe9rabilit\xe9s"},"D\xe9tection des vuln\xe9rabilit\xe9s"),(0,r.kt)("p",null,"Github propose des outils pour scanner le code automatiquement \xe0 la recherche de vuln\xe9rabilit\xe9s. Pour l'activer, il suffit de :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"aller dans l'onglet ",(0,r.kt)("inlineCode",{parentName:"li"},"Security")," du d\xe9p\xf4t github"),(0,r.kt)("li",{parentName:"ul"},"dans la partie ",(0,r.kt)("inlineCode",{parentName:"li"},"Security Overview"),", cliquer sur le bouton ",(0,r.kt)("inlineCode",{parentName:"li"},"Set up code scanning")," puis ",(0,r.kt)("inlineCode",{parentName:"li"},"Configure CodeQL alerts"),".")),(0,r.kt)("p",null,"Github propose alors de cr\xe9er un nouveau workflow ",(0,r.kt)("inlineCode",{parentName:"p"},".github/workflows/codeql-analysis.yml"),". Il suffit de committer les changements propos\xe9s."),(0,r.kt)("h3",{id:"mettre-\xe0-jour-les-d\xe9pendances"},"Mettre \xe0 jour les d\xe9pendances"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/renovatebot/renovate"},"Renovate")," est un outil qui permet de suivre les d\xe9pendances d'un projet et de soumettre automatiquent des PR quand des mises \xe0 jour des paquets sont dispos."),(0,r.kt)("p",null,"Cet outil est configur\xe9 \xe0 l'\xe9chelle de l'organisation SocialGouv, donc il va automatiquement proposer une premi\xe8re PR sur votre d\xe9p\xf4t pour ajouter la configuration requise. Il suffit de la merger pour d\xe9marrer !"),(0,r.kt)("p",null,"Plus de d\xe9tails dans la ",(0,r.kt)("a",{parentName:"p",href:"https://socialgouv.github.io/support/#/faq?id=utilisation-de-renovate"},"FAQ renovate")),(0,r.kt)("h2",{id:"d\xe9ployer-en-preprod"},"D\xe9ployer en preprod"),(0,r.kt)("p",null,"Cette \xe9tape est tr\xe8s proche de la review branch. Il suffit de cr\xe9er un fichier ",(0,r.kt)("inlineCode",{parentName:"p"},".github/workflows/preproduction.yaml")," qui contient :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'name: Preproduction\n\non:\n  push:\n    branches:\n      - "master"\n    tags-ignore:\n      - v*\n\nconcurrency:\n  cancel-in-progress: true\n  group: preproduction\n\njobs:\n  register-app:\n    name: Build & Register app\n    runs-on: ubuntu-latest\n    steps:\n      - name: Use autodevops build and register\n        uses: SocialGouv/actions/autodevops-build-register@v1\n        with:\n          environment: preprod\n          imagePackage: app\n          token: ${{ secrets.GITHUB_TOKEN }}\n\n  deploy:\n    name: Deploy preproduction\n    runs-on: ubuntu-latest\n    needs: [register-app]\n    environment:\n      name: preproduction\n      url: https://PROJECT_NAME-preprod.dev.fabrique.social.gouv.fr/\n    steps:\n      - name: Use kube-workflow deployment\n        uses: SocialGouv/kube-workflow@v1\n        with:\n          environment: preprod\n          token: ${{ secrets.GITHUB_TOKEN }}\n          kubeconfig: ${{ secrets.KUBECONFIG }}\n          rancherProjectId: ${{ secrets.RANCHER_PROJECT_ID }}\n          rancherProjectName: ${{ secrets.RANCHER_PROJECT_NAME }}\n')),(0,r.kt)("p",null,"Les changements viennent :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"dans les conditions du ",(0,r.kt)("inlineCode",{parentName:"li"},"on:")," : on d\xe9ploie tous les commits de master sauf les tags."),(0,r.kt)("li",{parentName:"ul"},"de ",(0,r.kt)("inlineCode",{parentName:"li"},"environment=preprod")),(0,r.kt)("li",{parentName:"ul"},"de l'ajout d'une clause ",(0,r.kt)("inlineCode",{parentName:"li"},"environnement")," avec nom et url pour sp\xe9cifier \xe0 Github de ranger ce d\xe9ploiement dans l'environnement de preproduction.\n",(0,r.kt)("inlineCode",{parentName:"li"},"!> Il faut penser \xe0 remplacer"),"PROJECT_NAME` par le nom du projet, qui est en g\xe9n\xe9ral le nom du d\xe9p\xf4t github.")),(0,r.kt)("h2",{id:"faire-une-release"},"Faire une release"),(0,r.kt)("p",null,"Les releases sont faites automatiquement avec ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/semantic-release/semantic-release"},"semantic-release"),"."),(0,r.kt)("p",null,"Il faut cr\xe9er un fichier ",(0,r.kt)("inlineCode",{parentName:"p"},".github/workflows/release.yaml")," qui contient :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"name: Release\n\non:\n  workflow_dispatch:\n  push:\n    branches: [master, alpha, beta, next]\n\njobs:\n  release:\n    name: Release\n    runs-on: ubuntu-latest\n    steps:\n      - uses: SocialGouv/actions/autodevops-release@v1\n        with:\n          author-name: ${{ secrets.SOCIALGROOVYBOT_NAME }}\n          author-email: ${{ secrets.SOCIALGROOVYBOT_EMAIL }}\n          github-token: ${{ secrets.SOCIALGROOVYBOT_BOTO_PAT }}\n")),(0,r.kt)("p",null,"Plus de d\xe9tails dans la ",(0,r.kt)("a",{parentName:"p",href:"https://socialgouv.github.io/support/#/faq?id=semantic-release"},"FAQ semantic-release")),(0,r.kt)("h2",{id:"d\xe9ployer-en-production"},"D\xe9ployer en production"),(0,r.kt)("p",null,"Le d\xe9ploiement en production est tr\xe8s proche de la pr\xe9production. Il faut ajouter un fichier ",(0,r.kt)("inlineCode",{parentName:"p"},".github/workflows/production.yaml")," qui contient :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"name: Production\n\non:\n  push:\n    tags:\n      - v*\n      \nconcurrency:\n  cancel-in-progress: true\n  group: production\n\njobs:\n  register-app:\n    name: Build & Register app\n    runs-on: ubuntu-latest\n    steps:\n      - name: Use autodevops build and register\n        uses: SocialGouv/actions/autodevops-build-register@v1\n        with:\n          environment: prod\n          imagePackage: app\n          token: ${{ secrets.GITHUB_TOKEN }}\n\n  deploy:\n    name: Deploy production\n    runs-on: ubuntu-latest\n    needs: [register-app]\n    environment:\n      name: production\n      url: https://PROJECT_NAME.fabrique.social.gouv.fr/\n    steps:\n      - name: Use kube-workflow deployment\n        uses: SocialGouv/kube-workflow@v1\n        with:\n          environment: prod\n          token: ${{ secrets.GITHUB_TOKEN }}\n          kubeconfig: ${{ secrets.KUBECONFIG }}\n          rancherProjectId: ${{ secrets.RANCHER_PROJECT_ID }}\n          rancherProjectName: ${{ secrets.RANCHER_PROJECT_NAME }}\n")),(0,r.kt)("p",null,"Ce qui change principalement par rapport \xe0 la preprod est qu'on ne d\xe9ploie que les tags."),(0,r.kt)("p",null,"!> Il faut penser \xe0 remplacer ",(0,r.kt)("inlineCode",{parentName:"p"},"PROJECT_NAME")," par le nom du projet, qui est en g\xe9n\xe9ral le nom du d\xe9p\xf4t github."),(0,r.kt)("p",null,"!> Les variables d'environnement du d\xe9p\xf4t github doivent \xeatre mises \xe0 jour pour la prod (notamment ",(0,r.kt)("inlineCode",{parentName:"p"},"KUBECONFIG"),"). C'est g\xe9r\xe9 par l'\xe9quipe SRE."),(0,r.kt)("h2",{id:"prochains-sujets---soon"},"Prochains sujets - soon"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Les variables d'environnement",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"front/back"),(0,r.kt)("li",{parentName:"ul"},"run/build"),(0,r.kt)("li",{parentName:"ul"},"sealed/configmap"))),(0,r.kt)("li",{parentName:"ul"},"App dynamique avec une DB"),(0,r.kt)("li",{parentName:"ul"},"Monitoring/dashboards/logs")))}c.isMDXComponent=!0},9167:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/files/.dockerignore-082b908047d6287dff3c23cd40072e75.txt"},6701:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/files/Dockerfile-6619d66f44b6f1e81d2ead1d22d1a91c.txt"},3291:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/files/deactivate-be27a36f5c74b3cbdafbeb6d99c2e350.yaml"},4014:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/files/next.config-c1281f1eabaca8e7ee943a33b3ef8da0.js"},6791:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/files/review_1-73fb17d19f50890ca62e5dde5daf18be.yaml"},9514:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/files/review_2-0e0f813ca843a7917d18500a796d65ee.yaml"}}]);